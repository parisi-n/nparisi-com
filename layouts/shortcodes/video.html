<!-- implementare type="rounded" -->
{{ $caption := ( .Get "caption" | markdownify ) }}
{{ $src := ( printf "%s/%s" "video" (.Get "src") ) }}

{{ $class := .Get "class"}}
{{ $style := .Get "style" }}
{{ $type := .Get "type" }}

{{ $parentclass := .Get "parent-class" }}
{{ $parentstyle := .Get "parent-style" }}

{{ $poster := "" }}

{{ if $type }}
    {{ $poster := "images/video_loading_wide-screen.svg" }}
{{ else }}
    {{ $poster := "images/video_loading.svg" }}
{{ end }}

<figure class="block-image {{$parentclass}}" style="display: block;{{ $parentstyle }}">

    <div class="{{if $type }} {{$type}}{{end}}">
        <video autoplay loop muted playsinline style="width: 100%" poster="{{ $poster | absURL }}">
          <source src="{{ $src }}" type="video/mp4">
        </video>
    </div>

    {{ if $caption }}
    <figcaption>
        {{ $caption }}
    </figcaption>
    {{ end }}


</figure>