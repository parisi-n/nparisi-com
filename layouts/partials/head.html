{{/* CSS */}}
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Monoton&display=swap" />
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans&display=swap" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<link href="{{ "css/style.css" | absURL }}?v={{ now.Unix }}" rel="stylesheet" type='text/css' media='all'>
<link href="{{ "css/custom.css" | absURL }}?v={{ now.Unix }}" rel="stylesheet" type='text/css' media='all'>

{{/* Slider */}}
<link rel="stylesheet" type="text/css" href="{{ "assets/slick/slick.css" | absURL }}?v={{ now.Unix }}"/>
<link rel="stylesheet" type="text/css" href="{{ "assets/slick/slick-theme.css" | absURL }}?v={{ now.Unix }}"/>

{{/* Cookie */}}
<script src="{{  "js/cookie.js"| absURL }}" async></script>
{{- /* Google Analytics */}}
{{ template "_internal/google_analytics_async.html" . }}

{{- /* Onscroll event */}}
<script type="text/javascript">
window.onload = function() {
    /* COOKIE */
    cookieConsent();
    
    /* LAZY LOADING. Guida: https://varvy.com/pagespeed/defer-images.html 
    var imgDefer = document.getElementsByTagName('img');
    for (var i=0; i<imgDefer.length; i++)
    {
        if(imgDefer[i].getAttribute('data-src'))
        {
            imgDefer[i].setAttribute('src',imgDefer[i].getAttribute('data-src'));
        }
    }*/
        
};
/* ---- BEGIN LAZY LOADING ----- */
const observer = lozad(); // lazy loads elements with default selector as '.lozad'

// Progressive section
window.onload = function() {

  var placeholder = document.querySelectorAll('.progressive_figure');

  placeholder.forEach(element => {
    var smallImage = element.getElementsByClassName('img-small')[0];

    // Load placeholder image
    var img = new Image();
    img.src = smallImage.getAttribute('src')
    img.onload = function () {
      smallImage.classList.add('loaded')
      // Load large image
      var largeImage = new Image();
      largeImage.srcset = element.getAttribute('data-imgset');
      largeImage.src = element.getAttribute('data-src');
      largeImage.classList.add('img-large')
      largeImage.classList.add('lozad')
      largeImage.onload = function () {
        largeImage.classList.add('loaded');
        smallImage.replaceWith(largeImage);
      }
    }
})};

observer.observe();
window.onscroll = function() {
    /* COOKIE */
    try
    {
        if (!getCookie('nparisiCookieApproved'))
        if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400)
            cookieApproved();
    }
    catch(error)
    {
        console.log( "Cookie gi√† creato" );
    }
}
</script>
